# apiVersion: apps/v1
# kind: Deployment
apiVersion: batch/v1
kind: Job
metadata:
  name: pi-job-default-sched
spec:
  completions: 4
  # selector:
  #   matchLabels:
  #     app: pi-test
  # replicas: 2 # tells deployment to run 2 pods matching the template
  template:
    metadata:
      labels:
        app: pi-test-default
    spec:
      containers:
      - name: pi-test
        image: localhost:5000/pi:latest # kind with local registry
        # image: xuyilindocker/testing:latest # minikube
        # image: pi:latest # eval $(minikube docker-env)
        # imagePullPolicy: Never # kind local needs to pull image from local registry
        resources:
          limits:
            cpu: "8"
          requests:
            cpu: "8"
      restartPolicy: Never
      